{% extends 'base.html' %}
{% block title %}Search: {{ search_term }}{% endblock %}

{% block content %}
<h2>Search: {{ search_term }}</h2>
<div class="row justify-content-center">
<ul>
    {% for recipe in recipe_list %}
        <li id="{{recipe.api_id}}"><a class="title" href={{recipe.recipe_url}} target="_blank">{{ recipe.name }}</a>
        {% if recipe.vegetarian %}
            <span class="vegetarian">Vegetarian</span>
        {% endif %}
        {% if recipe.vegan %}
            <span class="vegan">Vegan</span>
        {% endif %}
        <button class="favoriteButton"></button>
        {% for user_rating in user.ratings %}
            {% if user_rating.recipe.api_id == recipe.api_id %}
                <span>
                    <form action='/ratings/edit' method="GET"><input class="hidden" value={{user_rating.id}} type="number" name="rating_id"><button class="editRating">Edit your rating</button></form>
                </span>
            {% endif %}
        {% endfor %}
        <span>
            <form action='/ratings/rate' method="GET" id="ratingForm"><input class="hidden" value={{recipe.api_id}}
                        type="number" name="api_id"><button class="rateRecipe">Rate this recipe</button></form>
        </span>
        {% if recipe.api_id in has_ratings %}
            <span>
                <form class="viewRatingForm" action='/ratings'><button class='viewRatingsForm' name='api_id' value={{recipe.api_id}}>View ratings</button></form>
            </span>
        {% endif %}
        <div class="row">
            <br>
        </div>
        <div class="recipeImage row justify-content-center">
            <img src={{recipe.image_url}} alt="{{recipe.name}}" class="foodImg">
        </div>
        </li>
        <br>
    {% endfor %}
</ul>
</div>
{% endblock %}